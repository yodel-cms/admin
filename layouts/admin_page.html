<!DOCTYPE HTML>
<html>
  <head>
    <link rel="stylesheet" href="/admin/css/reset.css" type="text/css">
    <link rel="stylesheet" href="/admin/css/admin.css" type="text/css">
    <link type="text/css" href="/admin/css/smoothness/jquery-ui-1.8.10.custom.css" rel="stylesheet">	
		<title><%= @page.title %></title>
  </head>
  <body>
    <header>
      <h1>Dynamic Mind Works</h1>
      <nav>
        <ul>
          <li id="page">
            <select>
              <% @page.parent.children.each do |admin_page| %>
                <option data-href="<%= admin_page.path %>"><%= admin_page.title %></option>
              <% end %>
            </select>
          </li>
          <li id="logout"><a href="/logout">Logout</a></li>
          <li id="settings"><a href="/admin/settings">Settings</a></li>
        </ul>
      </nav>
    </header>
    
    <div id="navigation_panels">
    </div>
    
    <article id="record_form">
      <h1><span class="type">Product</span> ABC Product One</h1>
      <form>
        <table>
          <tr><td id="label_col"></td><td id="input_col"></td></tr>
          <tr><td><label>Title</label></td><td><input type="text"></td></tr>
          <tr><td><label>Content</label></td><td><textarea></textarea></td></tr>
          <tr><td><label>HTML</label></td><td class="html"><textarea class="html_field"></textarea></td></tr>
          <tr>
            <td><label>Photo</label></td>
            <td>
              <div class="attachment photo">
                <div class="photo_preview"><img src=""></div>
                <p class="current_value"><span class="title">File:</span>train.jpeg <a href="#" class="clear">Clear</a></p>
                <p><span class="title">Select:</span><input type="file"></p>
                <input type="hidden" name="delete_X" class="delete" value="false">
              </div>
            </td>
          </tr>
          <tr>
            <td><label>Attachment</label></td>
            <td>
              <div class="attachment">
                <p class="current_value"><span class="title">File:</span>test.pdf <a href="#" class="clear">Clear</a></p>
                <p><span class="title">Select:</span><input type="file"></p>
                <input type="hidden" name="delete_X" class="delete" value="false">
              </div>
            </td>
          </tr>
          <tr>
            <td><label>Date</label></td>
            <td>
              <div class="date">
                <input type="text" id="date" value="No date selected" disabled="disabled">
              </div>
            </td>
          </tr>
          <tr>
            <td><label>Checkbox</label></td>
            <td>
              <div class="checkbox">
                <input type="checkbox"> Option
              </div>
            </td>
          </tr>
          <tr>
            <td><label>Has Many</label></td>
            <td>
              <div class="has_many">
                <div class="search_bar"><input type="search" class="has_many_search"></div>
                <ul>
                  <li><input type="checkbox"><p>Product 1</p></li>
                  <li><input type="checkbox"><p>Product 2</p></li>
                  <li><input type="checkbox"><p>Product 3</p></li>
                  <li><input type="checkbox"><p>Product 4</p></li>
                  <li><input type="checkbox"><p>Product 5</p></li>
                  <li><input type="checkbox"><p>Product 6</p></li>
                  <li><input type="checkbox"><p>Product 7</p></li>
                  <li><input type="checkbox"><p>Product 8</p></li>
                  <li><input type="checkbox"><p>Product 9</p></li>
                  <li><input type="checkbox"><p>Product 10</p></li>
                </ul>
              </div>
            </td>
          </tr>
        </table>
        
        <section>
          <h1>Photos <a href="#" class="section_toggle">hide</a></h1>
          <div style="display: block" class="embedded_documents" data-type="photo">
            
            <p class="no_embedded_documents" style="display: none">No Photos</p>
            
            <div class="embedded_document">
              <a href="#" class="delete_embedded_document"></a>
              <table>
                <tr><td id="label_col"></td><td id="input_col"></td></tr>
                <tr>
                  <td><label>Photo</label></td>
                  <td>
                    <div class="attachment photo">
                      <div class="photo_preview"><img src=""></div>
                      <p class="current_value"><span class="title">File:</span>train.jpeg <a href="#" class="clear">Clear</a></p>
                      <p><span class="title">Select:</span><input type="file"></p>
                      <input type="hidden" name="delete_X" class="delete" value="false">
                    </div>
                  </td>
                </tr>
                <tr><td><label>Name</label></td><td><input type="text"></td></tr>
              </table>
            </div>
            
            <a href="#" class="add_embedded_document"></a>
          </div>
        </section>
        
        <section>
          <h1>Options <a href="#" class="section_toggle">show</a></h1>
          <div style="display: none">
            <table>
              <tr><td id="label_col"></td><td id="input_col"></td></tr>
              <tr>
                <td><label>Layout</label></td>
                <td>
                  <div class="select">
                    <select>
                      <option>Welcome</option>
                      <option>About</option>
                    </select>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </section>
      </form>
      
      <div>
        <button>Restore</button>
        <div id="save">
          <div>
            <img src="/admin/images/tick.png" style="display: none" id="save_success">
            <img src="/admin/images/cross.png" style="display: none" id="save_failure">
            <img src="/admin/images/save_spinner.gif" style="display: none" id="save_spinner">
          </div>
          <button>Save</button>
        </div>
        <div style="clear: both"></div>
      </div>
      
      <div id="record_loading" style="display: none">
        <img src="/admin/images/record_load.gif">
      </div>
    </article>
    
    <article id="new_article_panel" style="display: none">
      <h1>New</h1>
      <ul class="new_record_type">
        <% @page.class_and_descendants.each do |type| %>
          <a href="#" class="record_type" data-type="<%= type.name %>">
            <li>
              <img src="<%= type.icon %>">
              <p><%= type.human_name %></p>
            </li>
          </a>
        <% end %>
        <div style="clear: both"></div>
      </ul>
    </article>
    
    <script type="text/javascript" src="/admin/js/jquery-1.5.1.min.js"></script>
  	<script type="text/javascript" src="/admin/js/jquery-ui-1.8.10.custom.min.js"></script>
  	<script type="text/javascript" src="/admin/js/jquery-ui-timepicker-addon.js"></script>
  	<script type="text/javascript" src="/admin/tiny_mce/tiny_mce.js"></script>
  	<script type="text/javascript" src="/admin/js/admin.js"></script>
  	<script>
  	  var rootID = "<%= @page.root_record_id %>";
  	  var types = {
  	    <% @page.class_and_descendants.each do |type| %>
  	      "<%= type.name %>": {
  	        name: "<%= type.name %>",
  	        humanName: "<%= type.human_name %>",
  	        validChildren: [<%= type.valid_children.collect {|child_type| "'#{child_type.name}'"}.join(',') %>]
  	      },
  	    <% end %>
  	  };
  	  showMenu('', rootID);
  	</script>
  </body>
</html>
